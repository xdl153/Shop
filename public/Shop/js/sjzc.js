$("#storebutton").click(function(){var namereg=new RegExp(/^[a-zA-Z\d]\w{3,11}[a-zA-Z\d]$/);var regEx=new RegExp(/^[\u4e00-\u9fa5]{2,4}$/i);var emailreg=new RegExp(/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/);var name=$("#username").val();var password=$("#userpassword").val();var store=$("#store").val();var phone=$("#storephone").val();var email=$("#useremail").val();if(name!==""){if(namereg.test(name)){var nameok="ok";$("#bd1").html("")}else{var nameok="no";$("#bd1").html("用户名为6 - 13位数字字母组成")}}else{$("#bd1").html("用户名不能为空")}if(password!==""){if(password.match(namereg)){var passwordok="ok";$("#bd2").html("")}else{var passwordok="no";$("#bd2").html("密码为6 - 13位数字字母组成")}}else{$("#bd2").html("密码不能为空")}if(store!==""){}else{$("#bd3").html("联系人名称不能为空")}if(store.match(regEx)){var storeok="ok";$("#bd3").html("")}else{var storeok="no";$("#bd3").html("联系人名称为中文")}if(!!(/^1[34578]\d{9}$/.test(phone))){var phoneok="ok";$("#bd4").html("")}else{var phoneok="no";$("#bd4").html("请输入正确的手机号码")}if(email.match(emailreg)){var emailok="ok";$("#bd5").html("")}else{var emailok="no";$("#bd5").html("请输入正确的邮箱")}if(nameok=="ok"&&emailok=="ok"&&phoneok=="ok"&&storeok=="ok"&&nameok=="ok"){$.ajax({url:"/Business",type:"post",async:true,data:{id:name},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(data){if(data==="y"){$("#bd1").html("用户名已存在请重新输入")}else{$.ajax({url:"/FindBusinessPhone",type:"post",async:true,data:{userphone:phone},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(data){if(data==="y"){$("#bd4").html("手机号码已存在请重新输入")}else{$.ajax({url:"/FindEmail",type:"post",async:true,data:{id:email},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(data){if(data==="y"){$("#bd5").html("邮箱已存在请重新输入")}else{$.ajax({url:"/Submitinfo",type:"post",async:true,data:{id:name,password:password,username:store,phone:phone,email:email},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(data){if(data==="y"){$("#tjcg").html("　　　　　　　　您已成功申请"+"<br>"+"　　申请通过会通过邮箱发送给您请注意查收")}},error:function(){alert("网站错误请联系管理员")}})}},error:function(){alert("网站错误请联系管理员")}})}},error:function(){alert("网站错误请联系管理员")}})}},error:function(){alert("网站错误请联系管理员")}})}});